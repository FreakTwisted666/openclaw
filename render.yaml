services:
  - type: web
    name: openclaw-fallback
    runtime: docker
    # Free plan for fallback deployments (upgrade if you hit OOM).
    plan: free
    # Render uses healthCheckPath to verify the service is running
    # OpenClaw gateway serves the Control UI at root path
    healthCheckPath: /
    envVars:
      # IMPORTANT: Do NOT set PORT here - let Render inject it automatically
      # Render will set PORT to 10000 (or other assigned port)
      # State persistence
      - key: OPENCLAW_STATE_DIR
        value: /data/.openclaw
      - key: OPENCLAW_WORKSPACE_DIR
        value: /data/workspace
      # Auth - use a pre-set token or generate one
      - key: OPENCLAW_GATEWAY_TOKEN
        generateValue: true
      - key: OPENCLAW_CONFIG_PATH
        value: /app/render-openclaw.json
      - key: OPENCLAW_SKIP_CANVAS_HOST
        value: "1"
      # Node environment
      - key: NODE_ENV
        value: production
      # Increase Node heap size to avoid OOM
      - key: NODE_OPTIONS
        value: --max-old-space-size=384
    # Note: Free plan does not support persistent disks.
